

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; Recipe 0.11.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="contributing/development.html" />
    <link rel="prev" title="Hooks" href="advanced/hooks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4eb2cd" >
          

          
            <a href="index.html" class="icon icon-home"> Recipe
          

          
          </a>

          
            
            
              <div class="version">
                0.11.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Getting Started</a></li>
</ul>
<p class="caption"><span class="caption-text">Key Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts/overview.html">Overview of Recipe Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/ingredients.html">Ingredients</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/shelves.html">Shelves</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/from_config.html">Defining Shelves from configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/using_from_config.html">Using Shelves from configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions/intro_to_extensions.html">Using Extensions</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced/settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/ovens.html">Ovens</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/hooks.html">Hooks</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#recipe">Recipe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shelf">Shelf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ingredients">Ingredients</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extensions">Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Contributing to Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contributing/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/oven_drivers.html">Custom Oven Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/dynamic_extensions.html">Dynamic Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing/changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Recipe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-recipe"></span><p>This part of the documentation covers all the interfaces of Recipe.</p>
<div class="section" id="recipe">
<h2>Recipe<a class="headerlink" href="#recipe" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="recipe.Recipe">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Recipe</code><span class="sig-paren">(</span><em>shelf=None</em>, <em>metrics=None</em>, <em>dimensions=None</em>, <em>filters=None</em>, <em>order_by=None</em>, <em>session=None</em>, <em>extension_classes=()</em>, <em>dynamic_extensions=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe" title="Permalink to this definition">¶</a></dt>
<dd><p>A tool for getting data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>shelf</strong> (<em>Shelf</em>) – A shelf to use for shared metrics</li>
<li><strong>metrics</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of metrics to use from
the shelf. These can also be <a class="reference internal" href="#recipe.Metric" title="recipe.Metric"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Metric</span></code></a> objects.</li>
<li><strong>dimensions</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of dimensions to use
from the shelf. These can also be <a class="reference internal" href="#recipe.Dimension" title="recipe.Dimension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dimension</span></code></a> objects.</li>
<li><strong>filters</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of filters to use from
the shelf. These can also be <a class="reference internal" href="#recipe.Filter" title="recipe.Filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Filter</span></code></a> objects.</li>
<li><strong>order_by</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – A list of dimension or
metric keys from the shelf to use for ordering. If prefixed by ‘-‘
the ordering will be descending.</li>
<li><strong>session</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">Session</span></code>)</li>
<li><strong>extension_classes</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <a class="reference internal" href="#recipe.RecipeExtension" title="recipe.RecipeExtension"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RecipeExtension</span></code></a>) – Extensions to apply to this recipe.</li>
<li><strong>dynamic_extensions</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – Dynamic extensions to apply to this recipe.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Recipe object.</p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="recipe.Recipe.all">
<code class="descname">all</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a (potentially cached) list of result objects.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.as_table">
<code class="descname">as_table</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.as_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.as_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an alias to a table</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.cache_prefix">
<code class="descname">cache_prefix</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.cache_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.cache_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cache prefix for recipe-caching to use</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.cache_region">
<code class="descname">cache_region</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.cache_region"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.cache_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cache region for recipe-caching to use</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.dimensions">
<code class="descname">dimensions</code><span class="sig-paren">(</span><em>*dimensions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.dimensions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.dimensions" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of Dimension ingredients to the query. These can either be
Dimension objects or strings representing dimensions on the shelf.</p>
<p>The Dimension expression will be added to the query’s select statement
and to the group_by.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dimensions</strong> (<em>list</em>) – Dimensions to add to the recipe. Dimensions can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Dimension objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.filters">
<code class="descname">filters</code><span class="sig-paren">(</span><em>*filters</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.filters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of Filter ingredients to the query. These can either be
Filter objects or strings representing filters on the service’s shelf.
<code class="docutils literal notranslate"><span class="pre">.filters()</span></code> are additive, calling .filters() more than once will add
to the list of filters being used by the recipe.</p>
<p>The Filter expression will be added to the query’s where clause</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filters</strong> (<em>list</em>) – Filters to add to the recipe. Filters can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Filter objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.first">
<code class="descname">first</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.first"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.first" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first element on the result</p>
</dd></dl>

<dl class="classmethod">
<dt id="recipe.Recipe.from_config">
<em class="property">classmethod </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>shelf</em>, <em>obj</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Recipe from a plain Python dictionary.</p>
<p>Most of the directives only support named ingredients, specified as
strings, and looked up on the shelf. But filters can be specified as
objects.</p>
<p>Additionally, each RecipeExtension can extract and handle data from the
configuration.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.limit">
<code class="descname">limit</code><span class="sig-paren">(</span><em>limit</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.limit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit the number of rows returned from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>limit</strong> (<em>int</em>) – The number of rows to return in the recipe. 0 will
return all rows.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.metrics">
<code class="descname">metrics</code><span class="sig-paren">(</span><em>*metrics</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of Metric ingredients to the query. These can either be
Metric objects or strings representing metrics on the shelf.</p>
<p>The Metric expression will be added to the query’s select statement.
The metric value is a property of each row of the result.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metrics</strong> (<em>list</em>) – Metrics to add to the recipe. Metrics can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Metric objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.offset">
<code class="descname">offset</code><span class="sig-paren">(</span><em>offset</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.offset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset a number of rows before returning rows from the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>offset</strong> (<em>int</em>) – The number of rows to offset in the recipe. 0 will
return from the first available row</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.one">
<code class="descname">one</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.one"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.one" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the first element on the result</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.order_by">
<code class="descname">order_by</code><span class="sig-paren">(</span><em>*order_bys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of ingredients to order by to the query. These can
either be Dimension or Metric objects or strings representing
order_bys on the shelf.</p>
<p>The Order_by expression will be added to the query’s order_by statement</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order_bys</strong> (<em>list</em>) – Order_bys to add to the recipe. Order_bys can
either be keys on the <code class="docutils literal notranslate"><span class="pre">shelf</span></code> or
Dimension or Metric objects. If the
key is prefixed by “-” the ordering will be
descending.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.query">
<code class="descname">query</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.query"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a query using the ingredients supplied by the recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A SQLAlchemy query</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.shelf">
<code class="descname">shelf</code><span class="sig-paren">(</span><em>shelf=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.shelf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.shelf" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a shelf to use for this recipe</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.subquery">
<code class="descname">subquery</code><span class="sig-paren">(</span><em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.subquery"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.subquery" title="Permalink to this definition">¶</a></dt>
<dd><p>The recipe’s query as a subquery suitable for use in joins or other
queries.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.to_sql">
<code class="descname">to_sql</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.to_sql"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.to_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representation of the SQL this recipe will generate.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.total_count">
<code class="descname">total_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.total_count"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.total_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of rows that would be returned by this Recipe,
ignoring any <cite>limit</cite> that has been applied.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Recipe.use_cache">
<code class="descname">use_cache</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/core.html#Recipe.use_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Recipe.use_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>If False, invalidate the cache before fetching data.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="shelf">
<h2>Shelf<a class="headerlink" href="#shelf" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="recipe.Shelf">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Shelf</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds ingredients used by a recipe.</p>
<p>Can be initialized with no arguments, but also accepts:
- a dictionary of ingredients as a positional argument
- ingredients as keyword arguments</p>
<p>These keyword arguments have special meaning:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>select_from</strong> – The SQLALchemy-compatible object which
will be queried (usually a Table or ORM object).</li>
<li><strong>table</strong> – Unused, but stored on the <cite>Meta</cite> attribute.</li>
<li><strong>metadata</strong> – Unused, but stored on the <cite>Meta</cite> attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="recipe.Shelf.brew_query_parts">
<code class="descname">brew_query_parts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.brew_query_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.brew_query_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Make columns, group_bys, filters, havings</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Shelf.dimension_ids">
<code class="descname">dimension_ids</code><a class="headerlink" href="#recipe.Shelf.dimension_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Dimensions on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.enchant">
<code class="descname">enchant</code><span class="sig-paren">(</span><em>list</em>, <em>cache_context=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.enchant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.enchant" title="Permalink to this definition">¶</a></dt>
<dd><p>Add any calculated values to each row of a resultset generating a
new namedtuple</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>list</strong> – a list of row results</li>
<li><strong>cache_context</strong> – optional extra context for caching</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a list with ingredient.cauldron_extras added for all
ingredients</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Shelf.filter_ids">
<code class="descname">filter_ids</code><a class="headerlink" href="#recipe.Shelf.filter_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Metrics on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.find">
<code class="descname">find</code><span class="sig-paren">(</span><em>obj</em>, <em>filter_to_class=&lt;class 'recipe.ingredients.Ingredient'&gt;</em>, <em>constructor=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an Ingredient, optionally using the shelf.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> – A string or Ingredient</li>
<li><strong>filter_to_class</strong> – The Ingredient subclass that obj must be an
instance of</li>
<li><strong>constructor</strong> – An optional callable for building Ingredients
from obj</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An Ingredient of subclass <cite>filter_to_class</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="recipe.Shelf.from_config">
<em class="property">classmethod </em><code class="descname">from_config</code><span class="sig-paren">(</span><em>obj</em>, <em>selectable</em>, <em>ingredient_constructor=&lt;function ingredient_from_validated_dict&gt;</em>, <em>metadata=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.from_config"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.from_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a shelf using a dict shelf definition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obj</strong> – A Python dictionary describing a Shelf.</li>
<li><strong>selectable</strong> – A SQLAlchemy Table, a Recipe, a table name, or a
SQLAlchemy join to select from.</li>
<li><strong>metadata</strong> – If <cite>selectable</cite> is passed as a table name, then in
order to introspect its schema, we must have the SQLAlchemy
MetaData object to associate it with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A shelf that contains the ingredients defined in obj.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="recipe.Shelf.from_validated_yaml">
<em class="property">classmethod </em><code class="descname">from_validated_yaml</code><span class="sig-paren">(</span><em>yaml_str</em>, <em>selectable</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.from_validated_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.from_validated_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a shelf using a yaml shelf definition.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>yaml_str</strong> – A string containing yaml ingredient definitions.</li>
<li><strong>selectable</strong> – A SQLAlchemy Table, a Recipe, or a SQLAlchemy
join to select from.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A shelf that contains the ingredients defined in yaml_str.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="recipe.Shelf.from_yaml">
<em class="property">classmethod </em><code class="descname">from_yaml</code><span class="sig-paren">(</span><em>yaml_str</em>, <em>selectable</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.from_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.from_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Shim that calls from_validated_yaml.</p>
<p>This used to call a different implementation of yaml parsing</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.ingredients">
<code class="descname">ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.ingredients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.ingredients" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the ingredients in this shelf in a deterministic order</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the ingredient names and values.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the ingredient keys.</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Shelf.metric_ids">
<code class="descname">metric_ids</code><a class="headerlink" href="#recipe.Shelf.metric_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Metrics on this shelf in the order in which
they were used.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>k</em>, <em>d=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.pop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pop an ingredient off of this shelf.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Shelf.values">
<code class="descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/shelf.html#Shelf.values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Shelf.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an iterator over the ingredients.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.AutomaticShelf">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">AutomaticShelf</code><a class="reference internal" href="_modules/recipe/shelf.html#AutomaticShelf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticShelf" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a SQLAlchemy Table, automatically generate a Shelf with metrics
and dimensions based on its schema.</p>
</dd></dl>

</div>
<div class="section" id="ingredients">
<h2>Ingredients<a class="headerlink" href="#ingredients" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="recipe.Ingredient">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Ingredient</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Ingredient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Ingredient" title="Permalink to this definition">¶</a></dt>
<dd><p>Ingredients combine to make a SQLAlchemy query.</p>
<p>Any unknown keyword arguments provided to an Ingredient
during initializatino are stored in a meta object.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># icon is an unknown keyword argument</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">MyTable</span><span class="o">.</span><span class="n">sales</span><span class="p">),</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;cog&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">icon</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s1">&#39;cog&#39;</span>
</pre></div>
</div>
<p>This meta storage can be used to add new capabilities to
ingredients.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – An id to identify this Ingredient. If ingredients are
added to a Shelf, the id is automatically set as the key in
the shelf.</li>
<li><strong>columns</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A list of SQLAlchemy columns to use in a query select.</li>
<li><strong>filters</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>) – A list of SQLAlchemy BinaryExpressions to use in the
.filter() clause of a query.</li>
<li><strong>havings</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>) – A list of SQLAlchemy BinaryExpressions to use in the
.having() clause of a query.</li>
<li><strong>columns</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A list of SQLAlchemy columns to use in the <cite>group_by</cite> clause
of a query.</li>
<li><strong>formatters</strong> – (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code>):
A list of callables to apply to the result values.
If formatters exist, property <cite>{ingredient.id}_raw</cite> will
exist on each result row containing the unformatted
value.</li>
<li><strong>cache_context</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – Extra context when caching this ingredient. DEPRECATED</li>
<li><strong>ordering</strong> (<cite>string</cite>, ‘asc’ or ‘desc’) – One of ‘asc’ or ‘desc’.  ‘asc’ is the default value.
The default ordering of this ingredient if it is
used in a <code class="docutils literal notranslate"><span class="pre">recipe.order_by</span></code>.
This is added to the ingredient when the ingredient is
used in a <code class="docutils literal notranslate"><span class="pre">recipe.order_by</span></code>.</li>
<li><strong>quickselects</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of named filters) – A list of named filters that can be accessed through
<code class="docutils literal notranslate"><span class="pre">build_filter</span></code>. Named filters are dictionaries with
a <code class="docutils literal notranslate"><span class="pre">name</span></code> (:obj:str) property and a <code class="docutils literal notranslate"><span class="pre">condition</span></code> property
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">BinaryExpression</span></code>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An Ingredient object.</p>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="recipe.Ingredient.build_filter">
<code class="descname">build_filter</code><span class="sig-paren">(</span><em>value</em>, <em>operator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Ingredient.build_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Ingredient.build_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds a filter based on a supplied value and optional operator. If
no operator is supplied an <code class="docutils literal notranslate"><span class="pre">in</span></code> filter will be used for a list and a
<code class="docutils literal notranslate"><span class="pre">eq</span></code> filter if we get a scalar value.</p>
<p><code class="docutils literal notranslate"><span class="pre">build_filter</span></code> is used by the AutomaticFilter extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><p class="first"><strong>value</strong> – A value or list of values to operate against</p>
</li>
<li><p class="first"><strong>operator</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – An operator that determines the type of comparison
to do against value.</p>
<p>The default operator is ‘in’ if value is a list and
‘eq’ if value is a string, number, boolean or None.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A Filter object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Ingredient.cauldron_extras">
<code class="descname">cauldron_extras</code><a class="headerlink" href="#recipe.Ingredient.cauldron_extras" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield extra tuples containing a field name and a callable that takes
a row.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Ingredient.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Ingredient.describe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Ingredient.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representation of the ingredient.</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Ingredient.expression">
<code class="descname">expression</code><a class="headerlink" href="#recipe.Ingredient.expression" title="Permalink to this definition">¶</a></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Ingredient.make_column_suffixes">
<code class="descname">make_column_suffixes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Ingredient.make_column_suffixes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Ingredient.make_column_suffixes" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure we have the right column suffixes. These will be appended
to <cite>id</cite> when generating the query.</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Ingredient.order_by_columns">
<code class="descname">order_by_columns</code><a class="headerlink" href="#recipe.Ingredient.order_by_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield columns to be used in an order by using this ingredient</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Ingredient.query_columns">
<code class="descname">query_columns</code><a class="headerlink" href="#recipe.Ingredient.query_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield labeled columns to be used as a select in a query.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.Dimension">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Dimension</code><span class="sig-paren">(</span><em>expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Dimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Dimension" title="Permalink to this definition">¶</a></dt>
<dd><p>A Dimension is an Ingredient that adds columns and groups by those
columns. Columns should be non-aggregate SQLAlchemy expressions.</p>
<p>The required expression supplies the dimension’s value role. Additional
expressions can be provided in keyword arguments with keys
that look like “{role}_expression”. The role is suffixed to the
end of the SQL column name.</p>
<p>For instance, the following</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Dimension</span><span class="p">(</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
          <span class="n">latitude_expression</span><span class="o">=</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">lat</span>
          <span class="n">longitude_expression</span><span class="o">=</span><span class="n">Hospitals</span><span class="o">.</span><span class="n">lng</span><span class="p">,</span>
          <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;hospital&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>would add columns named “hospital”, “hospital_latitude”, and
“hospital_longitude” to the recipes results. All three of these expressions
would be used as group bys.</p>
<p>The following additional keyword parameters are also supported:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><p class="first"><strong>lookup</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>) – A dictionary that is used to map values to new values.</p>
<p>Note: Lookup adds a <code class="docutils literal notranslate"><span class="pre">formatter</span></code> callable as the first
item in the list of formatters.</p>
</li>
<li><p class="first"><strong>lookup_default</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">object</span></code>) – A default to show if the value can’t be found in the
lookup dictionary.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A Filter object</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lookup</strong> – dict A dictionary to translate values into</li>
<li><strong>lookup_default</strong> – A default to show if the value can’t be found in the
lookup dictionary.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="recipe.Dimension.cauldron_extras">
<code class="descname">cauldron_extras</code><a class="headerlink" href="#recipe.Dimension.cauldron_extras" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield extra tuples containing a field name and a callable that takes
a row</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Dimension.id_prop">
<code class="descname">id_prop</code><a class="headerlink" href="#recipe.Dimension.id_prop" title="Permalink to this definition">¶</a></dt>
<dd><p>The label of this dimensions id in the query columns</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Dimension.make_column_suffixes">
<code class="descname">make_column_suffixes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Dimension.make_column_suffixes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Dimension.make_column_suffixes" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure we have the right column suffixes. These will be appended
to <cite>id</cite> when generating the query.</p>
</dd></dl>

<dl class="attribute">
<dt id="recipe.Dimension.order_by_columns">
<code class="descname">order_by_columns</code><a class="headerlink" href="#recipe.Dimension.order_by_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield columns to be used in an order by using this ingredient</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.IdValueDimension">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">IdValueDimension</code><span class="sig-paren">(</span><em>id_expression</em>, <em>value_expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#IdValueDimension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.IdValueDimension" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATED: A convenience class for creating a Dimension
with a separate <code class="docutils literal notranslate"><span class="pre">id_expression</span></code>.  The following are identical.</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">student_name</span><span class="p">,</span> <span class="n">id_expression</span><span class="o">=</span><span class="n">Student</span><span class="o">.</span><span class="n">student_id</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">IdValueDimension</span><span class="p">(</span><span class="n">Student</span><span class="o">.</span><span class="n">student_id</span><span class="p">,</span> <span class="n">Student</span><span class="o">.</span><span class="n">student_name</span><span class="p">)</span>
</pre></div>
</div>
<p>The former approach is recommended.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>id_expression</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A column expression that is used to identify the id
for a Dimension</li>
<li><strong>value_expression</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">ColumnElement</span></code>) – A column expression that is used to identify the value
for a Dimension</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="recipe.Metric">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Metric</code><span class="sig-paren">(</span><em>expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Metric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Metric" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple metric created from a single expression</p>
<dl class="method">
<dt id="recipe.Metric.build_filter">
<code class="descname">build_filter</code><span class="sig-paren">(</span><em>value</em>, <em>operator=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Metric.build_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Metric.build_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Building filters with Metric returns Having objects.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.WtdAvgMetric">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">WtdAvgMetric</code><span class="sig-paren">(</span><em>expression</em>, <em>weight_expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#WtdAvgMetric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.WtdAvgMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>A metric that generates the weighted average of a metric by a weight.</p>
</dd></dl>

<dl class="class">
<dt id="recipe.DivideMetric">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">DivideMetric</code><span class="sig-paren">(</span><em>numerator</em>, <em>denominator</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#DivideMetric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.DivideMetric" title="Permalink to this definition">¶</a></dt>
<dd><p>A metric that divides a numerator by a denominator handling several
possible error conditions</p>
<p>The default strategy is to add an small value to the denominator
Passing ifzero allows you to give a different value if the denominator is
zero.</p>
</dd></dl>

<dl class="class">
<dt id="recipe.Filter">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple filter created from a single expression.</p>
<dl class="attribute">
<dt id="recipe.Filter.expression">
<code class="descname">expression</code><a class="headerlink" href="#recipe.Filter.expression" title="Permalink to this definition">¶</a></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.Having">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Having</code><span class="sig-paren">(</span><em>expression</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/ingredients.html#Having"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Having" title="Permalink to this definition">¶</a></dt>
<dd><p>A Having that limits results based on an aggregate boolean clause</p>
<dl class="attribute">
<dt id="recipe.Having.expression">
<code class="descname">expression</code><a class="headerlink" href="#recipe.Having.expression" title="Permalink to this definition">¶</a></dt>
<dd><p>An accessor for the SQLAlchemy expression representing this
Ingredient.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="extensions">
<h2>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="recipe.RecipeExtension">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">RecipeExtension</code><span class="sig-paren">(</span><em>recipe</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension" title="Permalink to this definition">¶</a></dt>
<dd><p>Recipe extensions plug into the recipe builder pattern and can modify the
generated query.</p>
<p>recipe generates a query in the following way</p>
<blockquote>
<div><p>(RECIPE) recipe checks if a query has been generated</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">add_ingredients</span></code> run to inject
ingredients directly on the recipe</p>
<p>(RECIPE) recipe runs gather_all_ingredients_into_cauldron to build a
global lookup for ingredients</p>
<p>(RECIPE) recipe runs cauldron.brew_query_parts to gather sqlalchemy
columns, group_bys and filters</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_recipe_parts(recipeparts)</span></code> run to
directly modify the collected sqlalchemy columns, group_bys or filters</p>
<p>(RECIPE) recipe builds a preliminary query with columns</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_prequery_parts(prequery_parts)</span></code>
run to modify the query</p>
<p>(RECIPE) recipe builds a full query with group_bys, order_bys,
and filters.</p>
<p>(RECIPE) recipe tests that this query only uses a single from</p>
<p>(EXTENSIONS) all extension <code class="docutils literal notranslate"><span class="pre">modify_postquery_parts(</span>
<span class="pre">postquery_parts)</span></code> run to modify the query</p>
<p>(RECIPE) recipe applies limits and offsets on the query</p>
<p>(RECIPE) recipe caches completed query</p>
</div></blockquote>
<p>When the recipe fetches data the results will be <code class="docutils literal notranslate"><span class="pre">enchanted</span></code> to add
fields to the result. <code class="docutils literal notranslate"><span class="pre">RecipeExtensions</span></code> can modify result rows with</p>
<blockquote>
<div><p>enchant_add_fields: Return a tuple of field names to add to a
result row</p>
<p>enchant_row(row): Return a tuple of field values for each row in
results.</p>
</div></blockquote>
<dl class="method">
<dt id="recipe.RecipeExtension.add_ingredients">
<code class="descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.add_ingredients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.add_ingredients" title="Permalink to this definition">¶</a></dt>
<dd><p>Add ingredients to the recipe</p>
<p>This method should be overridden by subclasses</p>
</dd></dl>

<dl class="method">
<dt id="recipe.RecipeExtension.enchant_add_fields">
<code class="descname">enchant_add_fields</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.enchant_add_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.enchant_add_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows extensions to add fields to a result row.
Return a tuple of the field names that are being added with
this method</p>
</dd></dl>

<dl class="method">
<dt id="recipe.RecipeExtension.enchant_row">
<code class="descname">enchant_row</code><span class="sig-paren">(</span><em>row</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.enchant_row"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.enchant_row" title="Permalink to this definition">¶</a></dt>
<dd><p>This method adds the fields named in <code class="docutils literal notranslate"><span class="pre">enchant_add_fields</span></code> to
each result row.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.RecipeExtension.modify_postquery_parts">
<code class="descname">modify_postquery_parts</code><span class="sig-paren">(</span><em>postquery_parts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.modify_postquery_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.modify_postquery_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows extensions to directly modify query,
group_bys, filters, and order_bys generated from collected
ingredients after a final query using columns has been created.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.RecipeExtension.modify_prequery_parts">
<code class="descname">modify_prequery_parts</code><span class="sig-paren">(</span><em>prequery_parts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.modify_prequery_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.modify_prequery_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>This method allows extensions to directly modify query,
group_bys, filters, and order_bys generated from collected
ingredients after a preliminary query using columns has been created.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.RecipeExtension.modify_recipe_parts">
<code class="descname">modify_recipe_parts</code><span class="sig-paren">(</span><em>recipe_parts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#RecipeExtension.modify_recipe_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.RecipeExtension.modify_recipe_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify sqlalchemy components of the query</p>
<p>This method allows extensions to directly modify columns,
group_bys, filters, and order_bys generated from collected
ingredients.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.AutomaticFilters">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">AutomaticFilters</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#AutomaticFilters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticFilters" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatic generation and addition of Filters to a recipe.</p>
<p>Automatic filters take a dictionary of keys and values. For each key in
the dictionary, if the key is the id of a <code class="docutils literal notranslate"><span class="pre">Dimension</span></code> on the shelf,
a filter will be added to the recipe containing the values.</p>
<dl class="method">
<dt id="recipe.AutomaticFilters.apply_automatic_filters">
<code class="descname">apply_automatic_filters</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#AutomaticFilters.apply_automatic_filters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticFilters.apply_automatic_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggles whether automatic filters are applied to a recipe. The
following will disable automatic filters for this recipe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">apply_automatic_filters</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="recipe.AutomaticFilters.automatic_filters">
<code class="descname">automatic_filters</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#AutomaticFilters.automatic_filters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticFilters.automatic_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets a dictionary of automatic filters to apply to this recipe.
If your recipe uses a shelf that has dimensions ‘state’ and ‘gender’
you could filter the data to Men in California and New Hampshire with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">)</span>
<span class="n">recipe</span><span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">automatic_filters</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;California&#39;</span><span class="p">,</span> <span class="s1">&#39;New Hampshire&#39;</span><span class="p">],</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="s1">&#39;M&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Automatic filter keys can optionally include an <code class="docutils literal notranslate"><span class="pre">operator</span></code>.</p>
<p><strong>List operators</strong></p>
<p>If the value provided in the automatic_filter dictionary is a list,
the following operators are available. The default operator is <code class="docutils literal notranslate"><span class="pre">in</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ow">in</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="n">notin</span>
<span class="n">quickselect</span> <span class="p">(</span><span class="n">applies</span> <span class="n">multiple</span> <span class="n">conditions</span> <span class="n">matching</span> <span class="n">the</span>
  <span class="n">named</span> <span class="n">quickselect</span><span class="p">,</span> <span class="n">quickselects</span> <span class="n">are</span> <span class="n">ORed</span> <span class="n">together</span><span class="p">)</span>
<span class="n">between</span> <span class="p">(</span><span class="n">requires</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">two</span> <span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Scalar operators</strong></p>
<p>If the value provided in the automatic_filter dictionary is a scalar
(a string, integer, or number), the following operators are available.
The default operator is <code class="docutils literal notranslate"><span class="pre">eq</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">eq</span> <span class="p">(</span><span class="n">equal</span><span class="p">)</span> <span class="p">(</span><span class="n">the</span> <span class="n">default</span><span class="p">)</span>
<span class="n">ne</span> <span class="p">(</span><span class="ow">not</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">lt</span> <span class="p">(</span><span class="n">less</span> <span class="n">than</span><span class="p">)</span>
<span class="n">lte</span> <span class="p">(</span><span class="n">less</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">gt</span> <span class="p">(</span><span class="n">greater</span> <span class="n">than</span><span class="p">)</span>
<span class="n">gte</span> <span class="p">(</span><span class="n">greater</span> <span class="n">than</span> <span class="ow">or</span> <span class="n">equal</span><span class="p">)</span>
<span class="n">like</span> <span class="p">(</span><span class="n">SQL</span> <span class="n">LIKE</span><span class="p">)</span>
<span class="n">ilike</span> <span class="p">(</span><span class="n">Case</span> <span class="n">insensitive</span> <span class="n">LIKE</span><span class="p">)</span>
<span class="n">quickselect</span> <span class="p">(</span><span class="n">applies</span> <span class="n">the</span> <span class="n">condition</span> <span class="n">matching</span> <span class="n">the</span> <span class="n">named</span> <span class="n">quickselect</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>An example using operators</strong></p>
<p>Here’s an example that filters to states that start with the letters
A-C:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">)</span>
<span class="n">recipe</span><span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">automatic_filters</span><span class="p">({</span>
    <span class="s1">&#39;state__lt&#39;</span><span class="p">:</span> <span class="s1">&#39;D&#39;</span>
<span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="recipe.AutomaticFilters.exclude_automatic_filter_keys">
<code class="descname">exclude_automatic_filter_keys</code><span class="sig-paren">(</span><em>*keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#AutomaticFilters.exclude_automatic_filter_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticFilters.exclude_automatic_filter_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>A “blacklist” of automatic filter keys to exclude. The following will
cause <code class="docutils literal notranslate"><span class="pre">'state'</span></code> to be ignored if it is present in the
<code class="docutils literal notranslate"><span class="pre">automatic_filters</span></code> dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">exclude_automatic_filter_keys</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="recipe.AutomaticFilters.include_automatic_filter_keys">
<code class="descname">include_automatic_filter_keys</code><span class="sig-paren">(</span><em>*keys</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#AutomaticFilters.include_automatic_filter_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.AutomaticFilters.include_automatic_filter_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>A “whitelist” of automatic filter keys to use. The following will
<strong>only use</strong> <code class="docutils literal notranslate"><span class="pre">'state'</span></code> for automatic filters regardless of what is
provided in the automatic_filters dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">recipe</span><span class="o">.</span><span class="n">include_automatic_filter_keys</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.BlendRecipe">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">BlendRecipe</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#BlendRecipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.BlendRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Add blend recipes, used for joining data from another table to a base
table</p>
<p>Supply a second recipe with a different <code class="docutils literal notranslate"><span class="pre">from</span></code>
Optionally supply join criteria, if no join criteria is provided join
will be attempted using constraints.
All ingredients from the blended recipe will be hoisted to the base
recipe except for ingredients that are used for joins (they must be the
same anyway).</p>
<p>Supports blend (inner) and full_blend (outer) joins.</p>
<dl class="method">
<dt id="recipe.BlendRecipe.blend">
<code class="descname">blend</code><span class="sig-paren">(</span><em>blend_recipe</em>, <em>join_base</em>, <em>join_blend</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#BlendRecipe.blend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.BlendRecipe.blend" title="Permalink to this definition">¶</a></dt>
<dd><p>Blend a recipe into the base recipe.
This performs an inner join of the blend_recipe to the
base recipe’s SQL.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.BlendRecipe.full_blend">
<code class="descname">full_blend</code><span class="sig-paren">(</span><em>blend_recipe</em>, <em>join_base</em>, <em>join_blend</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#BlendRecipe.full_blend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.BlendRecipe.full_blend" title="Permalink to this definition">¶</a></dt>
<dd><p>Blend a recipe into the base recipe preserving
values from both recipes.</p>
<p>This performs an outer join of the blend_recipe to the
base recipe.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.CompareRecipe">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">CompareRecipe</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#CompareRecipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.CompareRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Add compare recipes, used for presenting comparative context
vis-a-vis a base recipe.</p>
<p>Supply a second recipe with the same <code class="docutils literal notranslate"><span class="pre">`from</span></code>.
Metrics from the second recipe will be hoisted to the base recipe and
suffixed with a string (the default is “_compare”
Dimensions will be used to match the base recipe to the compare recipe.
Ordering from the base recipe is maintained.</p>
<dl class="method">
<dt id="recipe.CompareRecipe.compare">
<code class="descname">compare</code><span class="sig-paren">(</span><em>compare_recipe</em>, <em>suffix='_compare'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#CompareRecipe.compare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.CompareRecipe.compare" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a comparison recipe to a base recipe.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.SummarizeOver">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">SummarizeOver</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#SummarizeOver"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.SummarizeOver" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="recipe.Anonymize">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Anonymize</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Anonymize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Anonymize" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows recipes to be anonymized by adding an anonymize property.
This flips the anonymize flag on all Ingredients used in the recipe.</p>
<p>Injects an ingredient.meta._anonymize boolean property on each used
ingredient.</p>
<p>AnonymizeRecipe should occur last</p>
<dl class="method">
<dt id="recipe.Anonymize.add_ingredients">
<code class="descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Anonymize.add_ingredients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Anonymize.add_ingredients" title="Permalink to this definition">¶</a></dt>
<dd><p>Put the anonymizers in the last position of formatters</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Anonymize.anonymize">
<code class="descname">anonymize</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Anonymize.anonymize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Anonymize.anonymize" title="Permalink to this definition">¶</a></dt>
<dd><p>Should this recipe be anonymized</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="recipe.Paginate">
<em class="property">class </em><code class="descclassname">recipe.</code><code class="descname">Paginate</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows recipes to paginate results. Pagination also supports
searching and sorting within paginated data.</p>
<p><strong>Using and controlling pagination</strong></p>
<p>Pagination returns pages of data using limit and offset.</p>
<p>Pagination is enabled by setting a nonzero page size, like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="n">Recipe</span><span class="p">(</span><span class="n">shelf</span><span class="o">=</span><span class="n">shelf</span><span class="p">,</span> <span class="n">extension_classes</span><span class="o">=</span><span class="p">[</span><span class="n">Paginate</span><span class="p">])</span>            <span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page_size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Pagination may be disabled by setting <cite>.apply_pagination(False)</cite>.</p>
<p><strong>Searching</strong></p>
<p><cite>pagination_q</cite> allows a recipe to be searched for a string.
The default search fields are all dimensions used in the recipe.
Search keys can be customized with <cite>pagination_search_keys</cite>.
Search may be disabled by setting <cite>.apply_pagination_filters(False)</cite></p>
<p><strong>Sorting</strong></p>
<p>Pagination can override ordering applied to a recipe by setting
<cite>.pagination_order_by(…)</cite> to a list of ordering keys. If keys are
preceded by a “-“, ordering is descending, otherwise ordering is ascending.</p>
<p><strong>An example using all features</strong></p>
<p>Here’s an example that searches for keys that start with “t”, showing
the fifth page of results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shelf</span> <span class="o">=</span> <span class="n">Shelf</span><span class="p">({</span>
    <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">state</span><span class="p">),</span>
    <span class="s1">&#39;gender&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">gender</span><span class="p">),</span>
    <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="n">Dimension</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">age</span><span class="p">),</span>
    <span class="s1">&#39;population&#39;</span><span class="p">:</span> <span class="n">Metric</span><span class="p">(</span><span class="n">func</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">Census</span><span class="o">.</span><span class="n">population</span><span class="p">)),</span>
<span class="p">})</span>
<span class="n">recipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">recipe</span><span class="p">()</span>            <span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s2">&quot;pop2000&quot;</span><span class="p">)</span>            <span class="o">.</span><span class="n">dimensions</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page_size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_page</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_q</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>            <span class="o">.</span><span class="n">pagination_search_keys</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will generate SQL like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">census</span><span class="o">.</span><span class="n">age</span> <span class="n">AS</span> <span class="n">age</span><span class="p">,</span>
       <span class="n">census</span><span class="o">.</span><span class="n">sex</span> <span class="n">AS</span> <span class="n">sex</span><span class="p">,</span>
       <span class="n">census</span><span class="o">.</span><span class="n">state</span> <span class="n">AS</span> <span class="n">state</span><span class="p">,</span>
       <span class="nb">sum</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">population</span><span class="p">)</span> <span class="n">AS</span> <span class="n">population</span>
<span class="n">FROM</span> <span class="n">census</span>
<span class="n">WHERE</span> <span class="n">lower</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">state</span><span class="p">)</span> <span class="n">LIKE</span> <span class="n">lower</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>
  <span class="n">OR</span> <span class="n">lower</span><span class="p">(</span><span class="n">census</span><span class="o">.</span><span class="n">sex</span><span class="p">)</span> <span class="n">LIKE</span> <span class="n">lower</span><span class="p">(</span><span class="s1">&#39;t%&#39;</span><span class="p">)</span>
<span class="n">GROUP</span> <span class="n">BY</span> <span class="n">census</span><span class="o">.</span><span class="n">age</span><span class="p">,</span>
         <span class="n">census</span><span class="o">.</span><span class="n">sex</span><span class="p">,</span>
         <span class="n">census</span><span class="o">.</span><span class="n">state</span>
<span class="n">LIMIT</span> <span class="mi">10</span>
<span class="n">OFFSET</span> <span class="mi">40</span>
</pre></div>
</div>
<dl class="method">
<dt id="recipe.Paginate.add_ingredients">
<code class="descname">add_ingredients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.add_ingredients"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.add_ingredients" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply pagination ordering and search to this query if necessary.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.apply_pagination">
<code class="descname">apply_pagination</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.apply_pagination"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.apply_pagination" title="Permalink to this definition">¶</a></dt>
<dd><p>Should this recipe be paginated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>bool</em>) – Enable or disable pagination for this recipe, default True</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.apply_pagination_filters">
<code class="descname">apply_pagination_filters</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.apply_pagination_filters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.apply_pagination_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Should this recipe apply the paginations query filtering.</p>
<p>Should paginate_q be used to apply a search on paginate_search_keys or
all dimensions used in the recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>bool</em>) – Enable or disable pagination filtering for this recipe, default True</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.modify_postquery_parts">
<code class="descname">modify_postquery_parts</code><span class="sig-paren">(</span><em>postquery_parts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.modify_postquery_parts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.modify_postquery_parts" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply pagination limits and offset to a completed query.</p>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.pagination_order_by">
<code class="descname">pagination_order_by</code><span class="sig-paren">(</span><em>*value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.pagination_order_by"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.pagination_order_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort this pagination by these keys. Pagination ordering is applied
before any other order_bys defined in the recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of keys to order the paginated recipe by</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.pagination_page">
<code class="descname">pagination_page</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.pagination_page"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.pagination_page" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch this page.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>integer</em>) – A positive integer page number to fetch</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.pagination_page_size">
<code class="descname">pagination_page_size</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.pagination_page_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.pagination_page_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Paginate recipe responses into pages of this size.</p>
<p>A page size of zero disasbles pagination.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>integer</em>) – A page size (zero or a positive integer)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.pagination_q">
<code class="descname">pagination_q</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.pagination_q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.pagination_q" title="Permalink to this definition">¶</a></dt>
<dd><p>Search this recipe for this string. The search is an case
insensitive like that ORs all dimensions in the recipe by default.</p>
<p>To search for a substring, use a percentage sign for wildcard,
like ‘%searchval%’.</p>
<p><cite>pagination_search_keys</cite> can be used to customize what keys are used
for search.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>str</em>) – A query string to search for this in this recipe.
The query string is evaluated as a <cite>ilike</cite> on all dimensions
in the recipe or pagination_search_keys if provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="recipe.Paginate.pagination_search_keys">
<code class="descname">pagination_search_keys</code><span class="sig-paren">(</span><em>*value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/recipe/extensions.html#Paginate.pagination_search_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.Paginate.pagination_search_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>When querying this recipe with a <cite>pagination_q</cite>, search these keys</p>
<p>pagination_search_keys do not have to be used in the recipe.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>list</em><em>(</em><em>str</em><em>)</em>) – A list of keys to search in the paginated recipe</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exceptions">
<h2>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="recipe.BadIngredient">
<em class="property">exception </em><code class="descclassname">recipe.</code><code class="descname">BadIngredient</code><a class="reference internal" href="_modules/recipe/exceptions.html#BadIngredient"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.BadIngredient" title="Permalink to this definition">¶</a></dt>
<dd><p>Something is wrong with an ingredient</p>
</dd></dl>

<dl class="exception">
<dt id="recipe.BadRecipe">
<em class="property">exception </em><code class="descclassname">recipe.</code><code class="descname">BadRecipe</code><a class="reference internal" href="_modules/recipe/exceptions.html#BadRecipe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#recipe.BadRecipe" title="Permalink to this definition">¶</a></dt>
<dd><p>Something is wrong with a recipe</p>
</dd></dl>

<p>Now, go start some <a class="reference internal" href="contributing/development.html#development"><span class="std std-ref">Recipe Development</span></a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contributing/development.html" class="btn btn-neutral float-right" title="Development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="advanced/hooks.html" class="btn btn-neutral float-left" title="Hooks" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Chris Gemignani
      <span class="lastupdated">
        Last updated on Nov 07, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>