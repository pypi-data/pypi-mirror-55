from ame import No, CargaNodal, Apoio, CargaDistribuida, Material, Secao, PP2

# Estruturas cadastradas como exemplos
e1 = 'e1'
e2 = 'e2'

arquivos = [e1, e2]

# region Entrada de dados

# Materiais
materiais = {e1: [Material(1, 205e9, 0.2, 1.2e-5),
                  Material(2, 25e9, 0.2, 1e-5)],

             e2: [Material(1, 205e9, 0.3, 1.2e-5)]}

# Seções
secoes = {e1: [Secao(1, 1.3796e-3, 8.1052e-6, 0.1),
               Secao(2, 2.3758e-3, 2.3952e-5, 0.1)],

          e2: [Secao(1, 1.66e-3, 6.35e-6, 0.074)]}

# Apoios
apoios = {e1: [Apoio(False, False, True),
               Apoio(False, False, False)],

          e2: [Apoio(False, False, False)]}

# Cargas Nodais
cargas_nodais = {e1: [CargaNodal(-5e3, 1e3, 13e3)],

                 e2: [CargaNodal(-5e3, -50e3, 13e3)]}

# Cargas distribuídas nos elementos
cargas_dist = {e1: [CargaDistribuida(1e3, -2e3, 'local'),
                    CargaDistribuida(0.0, 4e3, 'local'),
                    CargaDistribuida(1.5e3, -0.5e3)],

               e2: []}
# Nós
nos = {e1: [No(1, 0.0, 0.0, CargaNodal(), apoios[e1][0]),
            No(2, 4.0, 0.0, CargaNodal(), apoios[e1][1]),
            No(3, 0, 2, CargaNodal(), Apoio()),
            No(4, 4, 4, cargas_nodais[e1][0], Apoio()),
            No(5, 5, 5, CargaNodal(), Apoio())],

       e2: [No(1, 1, 4, CargaNodal(), apoios[e2][0]),
            No(2, 4, 4, cargas_nodais[e2][0], Apoio()),
            No(3, 6, 4, CargaNodal(), apoios[e2][0])]}

# Elementos
elementos = {e1: [PP2(1, nos[e1][0], nos[e1][2], materiais[e1][1], secoes[e1][0], CargaDistribuida()),
                  PP2(2, nos[e1][2], nos[e1][3], materiais[e1][0], secoes[e1][0], cargas_dist[e1][0]),
                  PP2(3, nos[e1][1], nos[e1][3], materiais[e1][0], secoes[e1][1], cargas_dist[e1][1]),
                  PP2(4, nos[e1][3], nos[e1][4], materiais[e1][0], secoes[e1][0], cargas_dist[e1][2])],

             e2: [PP2(1, nos[e2][0], nos[e2][1], materiais[e2][0], secoes[e2][0], CargaDistribuida()),
                  PP2(2, nos[e2][1], nos[e2][2], materiais[e2][0], secoes[e2][0], CargaDistribuida())]}

# endregion

# region Resultados esperados
resultados = {e1: {'graus_liberdade_por_no': 3,
                   'graus_liberdade_impedidos': [1, 2, 4, 5, 6],
                   'graus_liberdade_livres': [3, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                   'graus_liberdade': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                   'matriz_rigidez': [[405260.0, 303945.0, 0.0, 202630.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
                                      [303945.0, 50940551.35514407, 25206841.94181896, 81022.52849385509,
                                       -50636606.35514407, -25206841.94181896, -222922.4715061449, 0.0, 0.0, 0.0],
                                      [0.0, 25206841.94181896, 30071343.442415625, 445844.9430122898,
                                       -25206841.94181896, -12826343.442415625, 445844.9430122898, 0.0, 0.0, 0.0],
                                      [202630.0, 81022.52849385509, 445844.9430122898, 1891409.8100409661,
                                       222922.4715061449, -445844.9430122898, 743074.9050204831, 0.0, 0.0, 0.0],
                                      [0.0, -50636606.35514407, -25206841.94181896, 222922.4715061449,
                                       155073237.93391955, 121673391.0046604, -1460481.2864608746, -103515976.5787755,
                                       -96466549.06284145, -3524713.7579670195],
                                      [0.0, -25206841.94181896, -12826343.442415625, -445844.9430122898,
                                       121673391.0046604, 238102070.02119112, 3078868.8149547298, -96466549.06284145,
                                       -103515976.5787755, 3524713.7579670195],
                                      [0.0, -222922.4715061449, 445844.9430122898, 743074.9050204831,
                                       -1460481.2864608746, 3078868.8149547298, 11095928.153996993, 3524713.7579670195,
                                       -3524713.7579670195, 2349809.171978014],
                                      [0.0, 0.0, 0.0, 0.0, -103515976.5787755, -96466549.06284145, 3524713.7579670195,
                                       103515976.5787755, 96466549.06284145, 3524713.7579670195],
                                      [0.0, 0.0, 0.0, 0.0, -96466549.06284145, -103515976.5787755, -3524713.7579670195,
                                       96466549.06284145, 103515976.5787755, -3524713.7579670195],
                                      [0.0, 0.0, 0.0, 0.0, -3524713.7579670195, 3524713.7579670195, 2349809.171978014,
                                       3524713.7579670195, -3524713.7579670195, 4699618.343956028]],
                   'forcas_nodais_aplicadas': [0., 0., 0., 0., 0., 0., 0., 0., 0., -5000., 1000., 13000., 0., 0., 0.],
                   'forcas_nodais_totais': [0.0, 0.0, 0.0, -8000.0, 0.0, 5333.333333333333, 4000.0, -3000.0,
                                            -3333.333333333334, -7939.339828220179, -2353.5533905932734,
                                            10764.297739604484, 1060.6601717798212, -353.55339059327366,
                                            235.70226039551585],
                   'deslocamentos': [0.0, 0.0, 0.010756869758238894, 0.0, 0.0, 0.0, -0.012364850776379367,
                                     -0.0004058289346022399, -0.0029664633519087386, -0.012689919032664103,
                                     1.0606240535392592e-05, 0.005536676195008725, -0.017923906367813363,
                                     0.005248129418523512, 0.005135448277088667],
                   'nos_apoiados': (nos[e1][0],
                                    nos[e1][1]),
                   'nos_carregados': (nos[e1][3],),
                   'elementos_carregados': (elementos[e1][1],
                                            elementos[e1][2],
                                            elementos[e1][3])},

              e2: {'graus_liberdade_por_no': 3,
                   'graus_liberdade_impedidos': [1, 2, 3, 7, 8, 9],
                   'graus_liberdade_livres': [4, 5, 6],
                   'graus_liberdade': [1, 2, 3, 4, 5, 6, 7, 8, 9],
                   'matriz_rigidez': [[283583333.3333333, 0.0, 0.0], [0.0, 2531180.5555555555, 1084791.6666666667],
                                      [0.0, 1084791.6666666667, 4339166.666666667]],
                   'forcas_nodais_aplicadas': [0.0, 0.0, 0.0, -5000.0, -50000.0, 13000.0, 0.0, 0.0, 0.0],
                   'forcas_nodais_totais': [0.0, 0.0, 0.0, -5000.0, -50000.0, 13000.0, 0.0, 0.0, 0.0],
                   'deslocamentos': [0.0, 0.0, 0.0, -1.7631501616220984e-05, -0.023562127904743616,
                                     0.008886498943729596, 0.0, 0.0, 0.0],
                   'nos_apoiados': (nos[e2][0],
                                    nos[e2][2]),
                   'nos_carregados': (nos[e2][1],),
                   'elementos_carregados': ()}}

# endregion
