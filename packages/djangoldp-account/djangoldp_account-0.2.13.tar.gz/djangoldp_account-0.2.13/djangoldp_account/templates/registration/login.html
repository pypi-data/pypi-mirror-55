{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block title %}
    {% trans "Login" %}
{% endblock %}

{% block supplementary_css %}
    <link rel="stylesheet" href="{% static 'base.css' %}"/>
    <link rel="stylesheet" href="{% static 'registration/login.css' %}"/>
{% endblock %}

{% block content %}
    {% if next %}
        <div class="sib-login-title">
            {% if user.is_authenticated %}
                <h2>
                    {% blocktrans %}
                        Your account doesn't have access to this page. To proceed,
                        please login with an account that has access.
                    {% endblocktrans %}
                </h2>
            {% else %}
                <h2>{% trans "Please login to see this page." %}</h2>
            {% endif %}
        </div>
    {% endif %}

    <div class="sib-login-forms">
        {% if form.errors %}
            <p class="error">{% trans "Your username and password didn't match. Please try again." %}</p>
        {% endif %}
        <form class="sib-login-form" method="post" action="{% url 'login' %}">
            {% csrf_token %}
            <table class="sib-form-table">
                <tr>
                    <td>{%  trans "Username or email:" %}</td>
                    <td>{{ form.username }}</td>
                </tr>
                <tr>
                    <td>{{ form.password.label_tag }}</td>
                    <td>{{ form.password }}</td>
                </tr>
            </table>

            <input class="sib-validate" type="submit" value="{% trans 'login' %}"/>
            <input type="hidden" name="next" value="{{ next }}"/>
        </form>

        <a class="sib-btn-link" href="{% url 'password_reset' %}">{% trans "Lost password?" %}</a>

        <hr class="separator"/>

        <p>{% trans "or login using another authentification provider" %}</p>

        <form class="sib-login-form" method="post" action="{% url 'oidc_login' %}">
            {% csrf_token %}
            <label for="id_subject">{% trans "email, web-id, or provider url:" %}</label>
            <input type="text" name="subject" required id="id_subject"/>
            <input class="sib-validate" type="submit" value="{% trans 'login' %}"/>
            <input type="hidden" name="next" value="{{ next }}"/>
        </form>
    </div>
{% endblock %}
