
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Display page’s content in templates &#8212; django-page-cms 2.0.0 documentation</title>
    <link rel="stylesheet" href="_static/better.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Inline page editing" href="edit-content.html" />
    <link rel="prev" title="Installation" href="installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
      <link rel="stylesheet" href="_static/main.css" type="text/css" />
  </head><body>
    <header id="pageheader"><h1><a href="index.html ">
        django-page-cms 2.0.0 documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="installation.html" title="Previous document">Installation</a>
        </li>
        <li>
          <a href="edit-content.html" title="Next document">Inline page editing</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="index.html">django-page-cms 2.0.0 documentation</a></li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="display-page-s-content-in-templates">
<h1>Display page’s content in templates<a class="headerlink" href="#display-page-s-content-in-templates" title="Permalink to this headline">¶</a></h1>
<p>Gerbi CMS provide several template tags to extract data from the CMS.
To use these tags in your templates you must load them first:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">load</span> <span class="nv">pages_tags</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#get-content" id="id1">get_content</a></li>
<li><a class="reference internal" href="#show-content" id="id2">show_content</a></li>
<li><a class="reference internal" href="#page-has-content" id="id3">page_has_content</a></li>
<li><a class="reference internal" href="#get-page" id="id4">get_page</a></li>
<li><a class="reference internal" href="#show-absolute-url" id="id5">show_absolute_url</a></li>
<li><a class="reference internal" href="#delegate-the-page-rendering-to-another-application" id="id6">Delegate the page rendering to another application</a></li>
<li><a class="reference internal" href="#subclass-the-default-view" id="id7">Subclass the default view</a></li>
</ul>
</div>
<div class="section" id="get-content">
<h2><a class="toc-backref" href="#id1">get_content</a><a class="headerlink" href="#get-content" title="Permalink to this headline">¶</a></h2>
<p>Store a content type from a page into a context variable that you can reuse after:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">get_content</span> <span class="nv">current_page</span> <span class="s2">&quot;title&quot;</span> <span class="k">as</span> <span class="nv">content</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can also use the slug of a page:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">get_content</span> <span class="s2">&quot;my-page-slug&quot;</span> <span class="s2">&quot;title&quot;</span> <span class="k">as</span> <span class="nv">content</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>You can also use the id of a page:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">get_content</span> <span class="m">10</span> <span class="s2">&quot;title&quot;</span> <span class="k">as</span> <span class="nv">content</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use either the page object, the slug, or the id of the page.</p>
</div>
</div>
<div class="section" id="show-content">
<h2><a class="toc-backref" href="#id2">show_content</a><a class="headerlink" href="#show-content" title="Permalink to this headline">¶</a></h2>
<p>Output the content of a page directly within the template:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">show_content</span> <span class="nv">current_page</span> <span class="s2">&quot;title&quot;</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use either the page object, the slug, or the id of the page.</p>
</div>
</div>
<div class="section" id="page-has-content">
<h2><a class="toc-backref" href="#id3">page_has_content</a><a class="headerlink" href="#page-has-content" title="Permalink to this headline">¶</a></h2>
<p>Conditional tag that only renders its nodes if the page
has content for a particular content type. By default the
current page is used.</p>
<p>Syntax:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">page_has_content</span> <span class="o">&lt;</span><span class="nv">content_type</span><span class="o">&gt;</span> <span class="o">[&lt;</span><span class="nv">page</span> <span class="nv">var</span> <span class="nv">name</span><span class="o">&gt;]</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">end</span> <span class="nv">page_has_content</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">page_has_content</span> <span class="s1">&#39;header-image&#39;</span> <span class="cp">%}</span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">MEDIA_URL</span> <span class="cp">}}{%</span> <span class="k">imageplaceholder</span> <span class="s1">&#39;header-image&#39;</span> <span class="cp">%}</span><span class="s">&quot;</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">end_page_has_content</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="get-page">
<h2><a class="toc-backref" href="#id4">get_page</a><a class="headerlink" href="#get-page" title="Permalink to this headline">¶</a></h2>
<p>Retrieve a Page object and store it into a context variable that you can reuse after. Here is
an example of the use of this template tag to display a list of news:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span>Latest news<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">get_page</span> <span class="s2">&quot;news&quot;</span> <span class="k">as</span> <span class="nv">news_page</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">new</span> <span class="k">in</span> <span class="nv">news_page.get_children</span> <span class="cp">%}</span>
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span><span class="cp">{{</span> <span class="nv">new.title</span> <span class="cp">}}</span><span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>
    <span class="cp">{{</span> <span class="nv">new.publication_date</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">show_content</span> <span class="nv">new</span> <span class="nv">body</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use either the slug, or the id of the page.</p>
</div>
</div>
<div class="section" id="show-absolute-url">
<h2><a class="toc-backref" href="#id5">show_absolute_url</a><a class="headerlink" href="#show-absolute-url" title="Permalink to this headline">¶</a></h2>
<p>This tag show the absolute url of a page. The difference with the <cite>Page.get_url_path</cite> method is
that the template knows which language is used within the context and display the URL accordingly:</p>
<div class="highlight-html+django notranslate"><div class="highlight"><pre><span></span><span class="cp">{%</span> <span class="k">show_absolute_url</span> <span class="nv">current_page</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can use either the page object, the slug, or the id of the page.</p>
</div>
</div>
<div class="section" id="delegate-the-page-rendering-to-another-application">
<h2><a class="toc-backref" href="#id6">Delegate the page rendering to another application</a><a class="headerlink" href="#delegate-the-page-rendering-to-another-application" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="3rd-party-apps.html"><span class="doc">You can set another application to render certain pages of your website</span></a>.</p>
</div>
<div class="section" id="subclass-the-default-view">
<h2><a class="toc-backref" href="#id7">Subclass the default view</a><a class="headerlink" href="#subclass-the-default-view" title="Permalink to this headline">¶</a></h2>
<p>This CMS view is a class based view. This means is is easy
to override some default behavior. For example if you want to inject
additional context information into all the pages templates you can override
th method extra_context:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pages.views</span> <span class="k">import</span> <span class="n">Details</span>
<span class="kn">from</span> <span class="nn">news.models</span> <span class="k">import</span> <span class="n">News</span>

<span class="k">class</span> <span class="nc">NewsView</span><span class="p">(</span><span class="n">Details</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">extra_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">lastest_news</span> <span class="o">=</span> <span class="n">News</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;news&#39;</span><span class="p">:</span> <span class="n">lastest_news</span><span class="p">})</span>

<span class="n">details</span> <span class="o">=</span> <span class="n">NewsView</span><span class="p">()</span>
</pre></div>
</div>
<p>For your view to be used in place of the CMS one, you simply need
to point to it with something similar to this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="k">import</span> <span class="n">url</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">patterns</span>
<span class="kn">from</span> <span class="nn">YOUR_APP.views</span> <span class="k">import</span> <span class="n">details</span>
<span class="kn">from</span> <span class="nn">pages</span> <span class="k">import</span> <span class="n">page_settings</span>

<span class="k">if</span> <span class="n">page_settings</span><span class="o">.</span><span class="n">PAGE_USE_LANGUAGE_PREFIX</span><span class="p">:</span>
    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(?P&lt;lang&gt;[-\w]+)/(?P&lt;path&gt;.*)$&#39;</span><span class="p">,</span> <span class="n">details</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pages-details-by-path&#39;</span><span class="p">)</span>
    <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span>
        <span class="n">url</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^(?P&lt;path&gt;.*)$&#39;</span><span class="p">,</span> <span class="n">details</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;pages-details-by-path&#39;</span><span class="p">)</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Have a look at <cite>pages.urls</cite> for a up to date example of URLs configuration.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/gerbi.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Display page’s content in templates</a><ul>
<li><a class="reference internal" href="#get-content">get_content</a></li>
<li><a class="reference internal" href="#show-content">show_content</a></li>
<li><a class="reference internal" href="#page-has-content">page_has_content</a></li>
<li><a class="reference internal" href="#get-page">get_page</a></li>
<li><a class="reference internal" href="#show-absolute-url">show_absolute_url</a></li>
<li><a class="reference internal" href="#delegate-the-page-rendering-to-another-application">Delegate the page rendering to another application</a></li>
<li><a class="reference internal" href="#subclass-the-default-view">Subclass the default view</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="edit-content.html"
                        title="next chapter">Inline page editing</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/display-content.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form class="search" action="search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="installation.html" title="Previous document">Installation</a>
        </li>
        <li>
          <a href="edit-content.html" title="Next document">Inline page editing</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="index.html">django-page-cms 2.0.0 documentation</a></li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2009, Batiste Bieler.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.8.2
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>